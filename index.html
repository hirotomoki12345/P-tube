<!DOCTYPE html>
<html>
<head>
    <title>YouTube動画検索</title>
    <style>
        body {
            background: linear-gradient(to bottom, violet, indigo, blue, green, yellow, orange, red);
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        #videoContainer {
            text-align: center;
            margin-top: 20px;
        }

        #videoList {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .videoItem {
            border: 1px solid #ccc;
            margin: 10px;
            padding: 10px;
            cursor: pointer;
            max-width: 200px;
        }

        #player {
            margin-top: 20px;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }
    </style>
</head>
<body>
    <canvas id="background"></canvas>
    <h1>YouTube動画検索</h1>
    <input type="text" id="searchInput" placeholder="検索キーワード">
    <button onclick="searchVideos()">検索</button>
    <div id="videoContainer">
        <div id="videoList"></div>
        <div id="player"></div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        var apiKey = "AIzaSyD9_QlFf6fwKiznHnMY1tQDVdgmObgN-9I"; // ここにAPIキーを入力

        function searchVideos() {
            var searchQuery = document.getElementById("searchInput").value;
            var url = `https://www.googleapis.com/youtube/v3/search?key=${apiKey}&q=${searchQuery}&part=snippet&type=video`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    var videoList = document.getElementById("videoList");
                    videoList.innerHTML = "";

                    data.items.forEach(item => {
                        var videoItem = document.createElement("div");
                        videoItem.classList.add("videoItem");
                        videoItem.innerHTML = `<img src="${item.snippet.thumbnails.default.url}">
                                              <p>${item.snippet.title}</p>`;
                        videoItem.addEventListener("click", () => loadVideo(item.id.videoId));
                        videoList.appendChild(videoItem);
                    });
                });
        }

        function loadVideo(videoId) {
            var player = new YT.Player("player", {
                height: "360",
                width: "640",
                videoId: videoId,
                events: {
                    'onReady': onPlayerReady,
                }
            });
        }

        function onPlayerReady(event) {
            event.target.playVideo();
        }
    </script>
</body>
</html>
